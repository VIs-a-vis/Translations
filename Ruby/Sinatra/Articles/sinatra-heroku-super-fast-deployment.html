<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Sinatra + Heroku = супер быстрое развертывание</title>
    </head>
    <body>
        <h1>Sinatra + Heroku = супер быстрое развертывание</h1>
        <p>Оригинал <a href="http://rubysource.com/sinatra-heroku-super-fast-deployment/">Sinatra + Heroku = Super Fast Deployment</a></p>
        <p>Когда я начал писать для Rubysource, вскоре понял, что мне нужен сайт с моей небольшой биографией в конце каждой статьи. До сих пор я ставил ссылки на различные <a href="http://ididitmyway.heroku.com/">сайты</a> в которые писал и на <a href="https://twitter.com/#!/daz4126">мою страницу в Twitter</a>, но ни один из них на самом деле не был моим сайтом.</p>
        <p>В результате я решил провести некоторове время на выходных сделав что-нибудь для этого. Я просто хотел сделать это быстро, и таким образом сделал по-быстрому <a href="http://www.sinatrarb.com/">Sinatra</a> приложение и захостил его на <a href="http://www.heroku.com/">Heroku</a>. Если вы не использовали его раньше, то их легко установить через Rubygems:</p>
        <pre><code>gem install sinatra heroku</code></pre>
        <p>Я был удивлен как можно быстро развернуть сайт используя эти две технологии – весь процесс от начала до конца* занял пару часов. Теперь когда <a href="http://daz4126.com/">сайт работает</a>, я думаю, что хотел бы описать опыт и процесс создания и развертывания сайта таким образом.</p>
        <ul>
            <li>Должен добавить, что хотя потребовалась всего пара часов для создания сайта, после этого ушло еще несколько часов на приведение дизайна в надлежащий вид. Это не должно отменять тот факт, что "скелет" сайта был создан достаточно быстро.</li>
        </ul>
        <h2>Это Манчестер – здесь мы делаем вещи по-иному</h2>
        <p>Когда я начал думать о шаблоне для моего сайта, я очень быстро остановился на моем <a href="http://www.visitmanchester.com/">city of Manchester</a>. Я по-настоящему горжусь тем, что я выходец из такого великого города и хотел включить его аспекты (особенно музыку) в простой дизайн. После игры с множеством цветовых комбинаций я остановился на черном и желтом, являющимися цветами города (талисманом города является шмель). Эти цвета также размещены на <a href="http://en.wikipedia.org/wiki/Factory_Records">Factory Records</a> и позорном <a href="http://en.wikipedia.org/wiki/The_Haçienda">Hacienda nightclub branding</a>. Я не занимался много дизайнерской работой не компьютере – всего несколько эскизов карандашом на бумаге, да дизайн логотипа в <a href="http://inkscape.org/">Inkscape</a>. Когда все было завершено, я приступил непосредственно к разработке сайта.</p>
        <h2>Почему Sinatra?</h2>
        <p>Я просто хотел разработать одностраничный сайт, который можно было бы создать используя старый-добрый HTML. Итак, почему я выбрал Sinatra? На это был ряд причин. Первой была простота: я начал с единственного файла – main.rb – используя inline views:</p>
        <script src="https://gist.github.com/1977159.js?file=gistfile1.rb"></script>
        <p>Это значит, что я мог быстро разрабатывать сайт в начальной стадии, как и все (виды, стили, роуты и т.д.) вместе в одном файле. Использования Sinatra также позволило мне писать виды используя <a href="http://slim-lang.com/">Slim</a>, делающим верстку намного проще. Также я мог использовать <a href="https://github.com/daz4126/daz4126/blob/master/views/layout.slim">лэйаут</a>, что удобно для повторного использования в случае, если я добавлю другие страницы в будущем.</p>
        <p>Еще я хотел, вывести вверху страницы в баннере несколько цитат о городе, сменяющиеся при каждом визите. Это легко сделать используя Ruby, но невозможно в статической странице. Я начал с написания 3 цитат в виде инлайн вьюх в конце моего файла main.rb:</p>
        <script src="https://gist.github.com/1977164.js"> </script>
        <p>Затем я создал в обработчике переменную экземпляра, которая случайно выбирала одну из цитат:</p>
        <script src="https://gist.github.com/1977235.js"> </script>
        <p>Теперь, я могу поместить этот код в соотвествующее место в лэйауте:</p>
        <script src="https://gist.github.com/1977231.js"> </script>
        <p>Также используя Sinatra можно легко добавить некоторые настройки, используя конфигурационный блок вверху main.rb. Этот блок содержит любые настройки:</p>
        <script src="https://gist.github.com/1974885.js"> </script>
        <p>Стоит отметить, что настройки окружения (начинающиеся с ENV) используются Heroku для настроек сайта. Их легко задать с помощью простой команды:</p>
        <pre><code>heroku config:add AUTHOR=DAZ</code></pre>
        <p>Конфигурационный блок вначале будет искать эти настройки и если они не заданы, будет использовать значения по-умолчанию, заданные после ||.</p>
        <p>Sinatra также позволяет мне задать страницы ошибок 404 и 500 всего лишь в пару строк.</p>
        <script src="https://gist.github.com/1977228.js"> </script>
        <p>Все что мне надо сделать после этого, это создать пару вьюшек для этих ошибок:</p>
        <script src="https://gist.github.com/1977169.js"> </script>
        <p>В будущем я планирую разработать небольшой движок блога, таким образом если я захочу добавить блог к этому сайту – это будет легко сделать, т.к. в основе сайта уже лежит Sinatra.</p>
        <p>Использование Sinatra также позволяет легко и быстро добавить контактную форму (подробнее об этом позже). Опять же, я мог сделать это с помощью PHP скриптов, которые легко найти в интернете, но я предпочитаю использовать Ruby и думаю что это показывает, как Sinatra может использоваться в качестве современной Ruby альтернативы PHP, для создания небольших, динамических сайтов.</p>
    </body>
</html>
